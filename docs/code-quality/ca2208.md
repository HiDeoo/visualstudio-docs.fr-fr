---
title: "CA2208 : Instanciez les exceptions d'argument comme il se doit"
ms.date: 05/18/2020
ms.topic: reference
f1_keywords:
- CA2208
- InstantiateArgumentExceptionsCorrectly
helpviewer_keywords:
- InstantiateArgumentExceptionsCorrectly
- CA2208
ms.assetid: e2a48939-d9fa-478c-b2f9-3bdbce07dff7
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
ms.workload:
- multiple
ms.openlocfilehash: 238a457936ff8b14ed4262317be932e383ec7e96
ms.sourcegitcommit: de98ed7edc81383e47b87ae6e61143fbbbe7bc56
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/21/2020
ms.locfileid: "88708217"
---
# <a name="ca2208-instantiate-argument-exceptions-correctly"></a>CA2208 : Instanciez les exceptions d'argument comme il se doit

|Élément|Valeur|
|-|-|
|CheckId|CA2208|
|Category|Microsoft. usage|
|Modification avec rupture|Sans rupture|

## <a name="cause"></a>Cause

Lorsqu’une méthode a un paramètre et qu’elle lève un type d’exception qui est, ou dérive de, <xref:System.ArgumentException> , elle attendait un constructeur qui accepte un `paramName` paramètre correctement. Les causes possibles sont les suivantes :

- Un appel est passé au constructeur par défaut (sans paramètre) d’un type d’exception qui est ou dérive de, <xref:System.ArgumentException> qui a un constructeur acceptant un `paramName` paramètre.

- Un argument de chaîne incorrect est passé à un constructeur paramétrable d’un type d’exception qui est ou dérive de <xref:System.ArgumentException> .

- L’un des noms des paramètres est passé pour l' `message` argument du constructeur de type d’exception qui est ou dérive de <xref:System.ArgumentException> .

## <a name="rule-description"></a>Description de la règle

Au lieu d’appeler le constructeur par défaut, appelez l’une des surcharges de constructeur qui permet de fournir un message d’exception plus explicite. Le message d’exception doit cibler le développeur et expliquer clairement la condition d’erreur et comment corriger ou éviter l’exception.

Les signatures des constructeurs de chaîne un et deux de <xref:System.ArgumentException> et de ses types dérivés ne sont pas cohérentes par rapport à la position `message` et aux `paramName` paramètres. Assurez-vous que ces constructeurs sont appelés avec les arguments de chaîne corrects. Les signatures sont les suivantes :

- <xref:System.ArgumentException>(chaîne `message` )
- <xref:System.ArgumentException>(String `message` , String `paramName` )
- <xref:System.ArgumentNullException>(chaîne `paramName` )
- <xref:System.ArgumentNullException>(String `paramName` , String `message` )
- <xref:System.ArgumentOutOfRangeException>(chaîne `paramName` )
- <xref:System.ArgumentOutOfRangeException>(String `paramName` , String `message` )
- <xref:System.DuplicateWaitObjectException>(chaîne `parameterName` )
- <xref:System.DuplicateWaitObjectException>(String `parameterName` , String `message` )

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Pour corriger une violation de cette règle, appelez un constructeur qui accepte un message, un nom de paramètre, ou les deux, et assurez-vous que les arguments sont corrects pour le type d' <xref:System.ArgumentException> appel.

> [!TIP]
> Un correctif de code est disponible pour un nom de paramètre positionné de manière incorrecte dans Visual Studio. Pour l’utiliser, positionnez le curseur sur la ligne d’avertissement et appuyez sur **CTRL** + **.** (point). Choisissez **permuter l’ordre des arguments** dans la liste des options présentées.
>
> ![Correction de code pour CA2208-swap arguments](media/ca2208-codefix_swap.png)
>
> Si la <xref:System.ArgumentException> surcharge (String `message` ) est utilisée par erreur avec un nom de paramètre, correction permet d’utiliser un constructeur à deux arguments avec `null` message.
> 
> ![Correction de code pour CA2208-swap arguments](media/ca2208-codefix_null_msg.png)

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Il est possible de supprimer sans risque un avertissement de cette règle uniquement si un constructeur paramétré est appelé avec les arguments de chaîne appropriés.

## <a name="configurability"></a>Configurabilité

Si vous exécutez cette règle à partir d' [analyseurs FxCop](install-fxcop-analyzers.md) (et non avec l’analyse héritée), vous pouvez configurer les parties de votre code base sur lesquelles exécuter cette règle, en fonction de leur accessibilité. Par exemple, pour spécifier que la règle doit s’exécuter uniquement sur la surface de l’API publique, ajoutez la paire clé-valeur suivante à un fichier. editorconfig dans votre projet :

```ini
dotnet_code_quality.ca2208.api_surface = public
```

Par défaut, les règles CA2208 s’appliquent à toute la surface de l’API (public, interne et privé). Vous pouvez configurer cette option uniquement pour cette règle, pour toutes les règles ou pour toutes les règles de cette catégorie (conception). Pour plus d’informations, consultez [configurer les analyseurs FxCop](configure-fxcop-analyzers.md).

## <a name="example"></a>Exemple

Le code suivant illustre un constructeur qui instancie de manière incorrecte une instance de <xref:System.ArgumentNullException> .

[!code-csharp[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#1](../code-quality/codesnippet/CSharp/ca2208-instantiate-argument-exceptions-correctly_1.cs?range=3-6)]
[!code-vb[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#1](../code-quality/codesnippet/VisualBasic/ca2208-instantiate-argument-exceptions-correctly_1.vb)]

Le code suivant résout la violation précédente en basculant les arguments du constructeur.

[!code-csharp[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#2](../code-quality/codesnippet/CSharp/ca2208-instantiate-argument-exceptions-correctly_2.cs?range=3-6)]
[!code-vb[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#2](../code-quality/codesnippet/VisualBasic/ca2208-instantiate-argument-exceptions-correctly_2.vb)]

## <a name="related-rules"></a>Règles associées

- [CA1507 : Utiliser nameof à la place de string](ca1507.md)
