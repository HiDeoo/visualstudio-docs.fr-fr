---
title: 'CA1304 : Spécifier CultureInfo'
ms.date: 06/30/2018
ms.topic: reference
f1_keywords:
- SpecifyCultureInfo
- CA1304
helpviewer_keywords:
- SpecifyCultureInfo
- CA1304
ms.assetid: b912d76a-54fd-4c93-b25d-16491e0ae319
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 668555c6247b45fea9e472ab5347d692243c1d9f
ms.sourcegitcommit: ade07bd1cf69b8b494d171ae648cfdd54f7800d3
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/21/2020
ms.locfileid: "81649136"
---
# <a name="ca1304-specify-cultureinfo"></a>CA1304 : Spécifier CultureInfo

|||
|-|-|
|TypeName|SpecifyCultureInfo|
|CheckId|CA1304|
|Category|Microsoft.Globalisation|
|Modification avec rupture|Non-rupture|

## <a name="cause"></a>Cause

Une méthode ou un constructeur appelle un membre qui <xref:System.Globalization.CultureInfo?displayProperty=nameWithType> a une surcharge qui accepte un paramètre, <xref:System.Globalization.CultureInfo> et la méthode ou le constructeur n’appelle pas la surcharge qui prend le paramètre. Cette règle ne tient pas compte des appels aux méthodes suivantes :

- <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetObject%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetString%2A?displayProperty=nameWithType>

Vous pouvez également [configurer](#configurability) plus de symboles à exclure par cette règle.

## <a name="rule-description"></a>Description de la règle

Lorsqu’un <xref:System.IFormatProvider?displayProperty=nameWithType> objet ou un <xref:System.Globalization.CultureInfo> objet n’est pas fourni, la valeur par défaut fournie par le membre surchargé peut ne pas avoir l’effet que vous voulez dans tous les endroits. En outre, les membres .NET choisissent la culture par défaut et le formatage en fonction d’hypothèses qui pourraient ne pas être correctes pour votre code. Pour vous assurer que le code fonctionne comme prévu pour vos scénarios, vous devez fournir des informations spécifiques à la culture selon les lignes directrices suivantes :

- Si la valeur est affichée à l’utilisateur, utilisez la culture actuelle. Consultez <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>.

- Si la valeur est stockée et accessible par un logiciel, c’est-à-dire persistée dans un fichier ou une base de données, utilisez la culture invariante. Consultez <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.

- Si vous ne connaissez pas la destination de la valeur, demandez au consommateur ou au fournisseur de données de spécifier la culture.

Même si le comportement par défaut du membre surchargé est approprié pour vos besoins, il est préférable d’appeler explicitement la surcharge spécifique à la culture de sorte que votre code est auto-documenter et plus facilement entretenu.

> [!NOTE]
> <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>est utilisé uniquement pour récupérer les ressources <xref:System.Resources.ResourceManager?displayProperty=nameWithType> localisées en utilisant un exemple de la classe.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Pour corriger une violation de cette règle, <xref:System.Globalization.CultureInfo> utilisez la surcharge qui prend un argument.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Il est sûr de supprimer un avertissement de cette règle quand il est certain que la culture par défaut est le bon choix, et où la maintenance du code n’est pas une priorité de développement important.

## <a name="configurability"></a>Configurabilité

Si vous exécutez cette règle à partir [d’analyseurs FxCop](install-fxcop-analyzers.md) (et non avec l’analyse de l’héritage), vous pouvez configurer l’analyse pour cette règle.

### <a name="excluded-symbol-names"></a>Noms de symboles exclus

Vous pouvez configurer les parties de votre base de code à exclure de l’analyse. Par exemple, pour spécifier que la règle `MyType`ne doit pas s’exécuter sur n’importe quel code dans les types nommés, ajoutez la paire de valeur clé suivante à un fichier .editorconfig dans votre projet :

```ini
dotnet_code_quality.CA1304.excluded_symbol_names = MyType
```

Formats de nom de symbole autorisés dans la valeur d’option (séparés par '') :

- Nom du symbole seulement (inclut tous les symboles avec le nom, indépendamment du type ou de l’espace de nom contenant)
- Noms entièrement qualifiés dans le [format d’identification](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)de documentation du symbole . Chaque nom de symbole nécessite un préfixe de type symbole, tel que le préfixe « M : » pour les méthodes, le préfixe « T : » pour les types, le préfixe « N : » pour les espaces de nom, etc.
- `.ctor`pour les `.cctor` constructeurs et pour les constructeurs statiques

Exemples :

| Valeur d’option | Résumé |
| --- | --- |
|`dotnet_code_quality.CA1304.excluded_symbol_names = MyType` | Correspond à tous les symboles nommés 'MyType' dans la compilation
|`dotnet_code_quality.CA1304.excluded_symbol_names = MyType1|MyType2` | Correspond à tous les symboles nommés 'MyType1' ou 'MyType2' dans la compilation
|`dotnet_code_quality.CA1304.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | Correspond à la méthode spécifique 'MyMethod' avec une signature entièrement qualifiée
|`dotnet_code_quality.CA1304.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | Correspond aux méthodes spécifiques 'MyMethod1' et 'MyMethod2' avec une signature entièrement qualifiée

Vous pouvez configurer toutes ces options pour cette règle, pour toutes les règles, ou pour toutes les règles de cette catégorie (Sécurité). Pour plus d’informations, voir [Configurer les analyseurs FxCop](configure-fxcop-analyzers.md).

## <a name="example-showing-how-to-fix-violations"></a>Exemple montrant comment corriger les violations

Dans l’exemple `BadMethod` suivant, provoque deux violations de cette règle. `GoodMethod`corrige la première violation en passant la <xref:System.String.Compare%2A?displayProperty=nameWithType>culture invariante à , et <xref:System.String.ToLower%2A?displayProperty=nameWithType> corrige `string3` la deuxième violation en passant la culture actuelle à parce que est affiché à l’utilisateur.

[!code-csharp[FxCop.Globalization.CultureInfo#1](../code-quality/codesnippet/CSharp/ca1304-specify-cultureinfo_1.cs)]

## <a name="example-showing-formatted-output"></a>Exemple montrant la sortie formatée

L’exemple suivant montre l’effet <xref:System.IFormatProvider> de la culture <xref:System.DateTime> actuelle sur la valeur par défaut qui est sélectionnée par le type.

[!code-csharp[FxCop.Globalization.IFormatProvider#1](../code-quality/codesnippet/CSharp/ca1304-specify-cultureinfo_2.cs)]

Cet exemple produit la sortie suivante :

```txt
6/4/1900 12:15:12 PM
06/04/1900 12:15:12
```

## <a name="related-rules"></a>Règles connexes

- [CA1305 : Spécifier IFormatProvider](../code-quality/ca1305.md)

## <a name="see-also"></a>Voir aussi

- [Utilisation de la classe CultureInfo](/dotnet/standard/globalization-localization/globalization#work-with-culture-specific-settings)
