---
title: "CA1031 : Ne pas intercepter des types d'exception générale"
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1031
- DoNotCatchGeneralExceptionTypes
helpviewer_keywords:
- CA1031
- DoNotCatchGeneralExceptionTypes
ms.assetid: cbc283ae-2a46-4ec0-940e-85aa189b118f
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CPP
- CSharp
- VB
ms.workload:
- multiple
ms.openlocfilehash: e3ee7cfe17b607e3825b055a8f143e4cf8cac6c3
ms.sourcegitcommit: 577c905de52057a741e68c2ed168ea527813fda5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/15/2020
ms.locfileid: "88248145"
---
# <a name="ca1031-do-not-catch-general-exception-types"></a>CA1031 : Ne pas intercepter des types d'exception générale

|Élément|Valeur|
|-|-|
|CheckId|CA1031|
|Category|Microsoft. Design|
|Modification avec rupture|Sans rupture|

## <a name="cause"></a>Cause
Une exception générale, telle que <xref:System.Exception?displayProperty=fullName> ou <xref:System.SystemException?displayProperty=fullName> , est interceptée dans une `catch` instruction, ou une clause catch générale telle que `catch()` est utilisée.

Par défaut, cette règle signale uniquement les types d’exceptions générales qui sont interceptés, mais cela peut être [configuré](#configurability).

## <a name="rule-description"></a>Description de la règle
Les exceptions générales ne doivent pas être interceptées.

## <a name="how-to-fix-violations"></a>Comment corriger les violations
Pour corriger une violation de cette règle, interceptez une exception plus spécifique ou levez à nouveau l’exception générale comme dernière instruction dans le `catch` bloc.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements
Ne supprimez aucun avertissement de cette règle. L’interception des types d’exception généraux peut masquer les problèmes d’exécution de l’utilisateur de la bibliothèque et peut rendre le débogage plus difficile.

> [!NOTE]
> À partir du .NET Framework 4, le common language runtime (CLR) ne remet plus les exceptions d’état endommagé qui se produisent dans le système d’exploitation et le code managé, telles que les violations d’accès dans [!INCLUDE[TLA#tla_mswin](../code-quality/includes/tlasharptla_mswin_md.md)] , qui doivent être gérées par le code managé. Si vous souhaitez compiler une application dans le .NET Framework 4 ou versions ultérieures et maintenir la gestion des exceptions d’état endommagé, vous pouvez appliquer l' <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> attribut à la méthode qui gère l’exception d’état endommagé.

## <a name="configurability"></a>Configurabilité

Si vous exécutez cette règle à partir d' [analyseurs FxCop](install-fxcop-analyzers.md) (et non avec l’analyse héritée), cette règle est configurable.

### <a name="disallowed-exception-type-names"></a>Noms de type d’exception non autorisés

Vous pouvez configurer les types d’exception qui ne sont pas autorisés à être interceptés. Par exemple, pour spécifier que la règle doit signaler les `catch` gestionnaires avec `NullReferenceException` , ajoutez la paire clé-valeur suivante à un fichier. editorconfig dans votre projet :

```ini
dotnet_code_quality.CA1031.disallowed_symbol_names = NullReferenceException
```

Formats de nom de type autorisés dans la valeur de l’option (séparés par' | ') :
- Nom de type uniquement (comprend tous les symboles portant le nom, quel que soit le type ou l’espace de noms conteneur)
- Noms qualifiés complets dans le format d' [ID de documentation](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format) du symbole avec un `T:` préfixe.

Exemples :

| Valeur d’option | Récapitulatif |
| --- | --- |
|`dotnet_code_quality.CA1031.disallowed_symbol_names = ExceptionType` | Correspond à tous les symboles nommés « ExceptionType » dans la compilation
|`dotnet_code_quality.CA1031.disallowed_symbol_names = ExceptionType1|ExceptionType2` | Correspond à tous les symboles nommés’ExceptionType1 'ou’ExceptionType2 'dans la compilation
|`dotnet_code_quality.CA1031.disallowed_symbol_names = T:NS.ExceptionType` | Correspond à des types spécifiques nommés « ExceptionType » avec le nom qualifié complet donné.
|`dotnet_code_quality.CA1031.disallowed_symbol_names = T:NS1.ExceptionType1|T:NS1.ExceptionType2` | Correspond aux types nommés « ExceptionType1 » et « ExceptionType2 » avec les noms qualifiés complets respectifs

Vous pouvez configurer ces options uniquement pour cette règle, pour toutes les règles ou pour toutes les règles de cette catégorie (conception). Pour plus d’informations, consultez [configurer les analyseurs FxCop](configure-fxcop-analyzers.md).

## <a name="example"></a>Exemple
L’exemple suivant montre un type qui enfreint cette règle et un type qui implémente correctement le `catch` bloc.

[!code-cpp[FxCop.Design.ExceptionAndSystemException#1](../code-quality/codesnippet/CPP/ca1031-do-not-catch-general-exception-types_1.cpp)]
[!code-vb[FxCop.Design.ExceptionAndSystemException#1](../code-quality/codesnippet/VisualBasic/ca1031-do-not-catch-general-exception-types_1.vb)]
[!code-csharp[FxCop.Design.ExceptionAndSystemException#1](../code-quality/codesnippet/CSharp/ca1031-do-not-catch-general-exception-types_1.cs)]

## <a name="related-rules"></a>Règles associées
[CA2200 : Levez à nouveau une exception pour conserver les détails de la pile](../code-quality/ca2200.md)
