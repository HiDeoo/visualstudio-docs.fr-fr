---
title: 'CA1802 : Utilisez des littéraux quand cela est approprié'
ms.date: 03/11/2019
ms.topic: reference
f1_keywords:
- UseLiteralsWhereAppropriate
- CA1802
helpviewer_keywords:
- UseLiteralsWhereAppropriate
- CA1802
ms.assetid: 2515e4cd-9e61-486d-b067-58ba1a743ce4
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
ms.workload:
- multiple
ms.openlocfilehash: 8c8d3c1724786aa79d71c35c1b0e724d8273fba8
ms.sourcegitcommit: 577c905de52057a741e68c2ed168ea527813fda5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/15/2020
ms.locfileid: "88250469"
---
# <a name="ca1802-use-literals-where-appropriate"></a>CA1802 : Utilisez des littéraux quand cela est approprié

|Élément|Valeur|
|-|-|
|CheckId|CA1802|
|Category|Microsoft. performance|
|Modification avec rupture|Sans rupture|

## <a name="cause"></a>Cause

Un champ est déclaré `static` et `readonly` ( `Shared` et `ReadOnly` dans Visual Basic), et est initialisé avec une valeur qui peut être calculée au moment de la compilation.

Par défaut, cette règle recherche uniquement les champs visibles, statiques et en lecture seule de manière externe, mais elle peut [être configurée](#configurability).

## <a name="rule-description"></a>Description de la règle

La valeur d’un `static readonly` champ est calculée au moment de l’exécution lorsque le constructeur statique du type déclarant est appelé. Si le `static readonly` champ est initialisé lorsqu’il est déclaré et qu’un constructeur statique n’est pas déclaré explicitement, le compilateur émet un constructeur statique pour initialiser le champ.

La valeur d’un `const` champ est calculée au moment de la compilation et stockée dans les métadonnées, ce qui augmente les performances au moment de l’exécution lorsqu’elle est comparée à un `static readonly` champ.

Étant donné que la valeur assignée au champ ciblé peut être calculée au moment de la compilation, remplacez la déclaration par un `const` champ afin que la valeur soit calculée au moment de la compilation plutôt qu’au moment de l’exécution.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Pour corriger une violation de cette règle, remplacez les `static` `readonly` modificateurs et par le `const` modificateur.

> [!NOTE]
> L’utilisation du modificateur [const](/dotnet/csharp/language-reference/keywords/const) n’est pas recommandée pour tous les scénarios.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Il est possible de supprimer sans risque un avertissement de cette règle, ou de désactiver la règle, si les performances ne sont pas un problème.

## <a name="configurability"></a>Configurabilité

Si vous exécutez cette règle à partir d' [analyseurs FxCop](install-fxcop-analyzers.md) (et non avec l’analyse héritée), cette règle est configurable.

### <a name="api-surface"></a>Surface de l’API

Vous pouvez configurer les parties de votre code base pour exécuter cette règle, en fonction de leur accessibilité. Par exemple, pour spécifier que la règle doit s’exécuter uniquement sur la surface d’API non publique, ajoutez la paire clé-valeur suivante à un fichier. editorconfig dans votre projet :

```ini
dotnet_code_quality.ca1802.api_surface = private, internal
```

Vous pouvez configurer cette option uniquement pour cette règle, pour toutes les règles ou pour toutes les règles de cette catégorie (performances). Pour plus d’informations, consultez [configurer les analyseurs FxCop](configure-fxcop-analyzers.md).

### <a name="required-modifiers"></a>Modificateurs obligatoires

Vous pouvez configurer cette règle pour remplacer les modificateurs de champ requis. Par défaut, `static` et `readonly` sont tous les deux des modificateurs requis pour les champs qui sont analysés. Vous pouvez remplacer cette valeur par une virgule séparée par une virgule figurant dans la table ci-dessous :

| Valeur d’option | Récapitulatif |
| --- | --- |
| `none` | Aucune exigence de modificateur. |
| `static` ou `Shared` | Doit être déclaré comme « static » (« Shared » dans Visual Basic). |
| `const` | Doit être déclarée comme’const'. |
| `readonly` | Doit être déclaré comme’ReadOnly'. |

Par exemple, pour spécifier que la règle doit s’exécuter sur les champs statiques et d’instance, ajoutez la paire clé-valeur suivante à un fichier. editorconfig dans votre projet :

```ini
dotnet_code_quality.CA1802.required_modifiers = none
```

## <a name="example"></a>Exemple

L’exemple suivant illustre un type, `UseReadOnly` , qui enfreint la règle et un type, `UseConstant` , qui satisfait la règle.

[!code-vb[FxCop.Performance.UseLiterals#1](../code-quality/codesnippet/VisualBasic/ca1802-use-literals-where-appropriate_1.vb)]
[!code-csharp[FxCop.Performance.UseLiterals#1](../code-quality/codesnippet/CSharp/ca1802-use-literals-where-appropriate_1.cs)]
