---
title: 'CA5369 : Utiliser XmlReader pour la désérialisation'
description: Fournit des informations sur la règle d’analyse du code CA5369, notamment les causes, comment corriger les violations et quand la supprimer.
ms.date: 08/14/2019
ms.topic: reference
author: filipsebesta
ms.author: filipse
manager: jillfra
dev_langs:
- CSharp
ms.workload:
- multiple
f1_keywords:
- CA5369
- UseXMLReaderForDeserialize
ms.openlocfilehash: c4323ccb445b1c295ed697f239ed03be281abec6
ms.sourcegitcommit: d20ce855461c240ac5eee0fcfe373f166b4a04a9
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/29/2020
ms.locfileid: "84180712"
---
# <a name="ca5369-use-xmlreader-for-deserialize"></a>CA5369 : Utiliser XmlReader pour la désérialisation

|||
|-|-|
|CheckId|CA5369|
|Category|Microsoft.Security|
|Modification avec rupture|Sans rupture|

## <a name="cause"></a>Cause

La désérialisation d’une entrée XML non approuvée avec <xref:System.Xml.Serialization.XmlSerializer.Deserialize%2A?displayProperty=nameWithType> instancié sans `XmlReader` objet peut potentiellement entraîner un déni de service, la divulgation d’informations et des attaques de falsification de requête côté serveur. Ces attaques sont activées par une DTD non approuvée et un traitement de schéma XML, ce qui permet l’inclusion d’une bombe XML et d’entités externes malveillantes dans le code XML. Seul avec `XmlReader` est possible de désactiver la DTD. Le traitement de schéma XML inline comme `XmlReader` a la `ProhibitDtd` `ProcessInlineSchema` propriété et définie sur `false` par défaut dans .NET Framework version 4,0 et versions ultérieures. Les autres options telles que `Stream` , `TextReader` et `XmlSerializationReader` ne peuvent pas désactiver le traitement DTD.

## <a name="rule-description"></a>Description de la règle

Le traitement des DTD et des schémas XML non fiables peut permettre le chargement de références externes dangereuses, qui doivent être limitées à l’aide d’un `XmlReader` avec un programme de résolution sécurisé ou avec la DTD et le traitement du schéma Inline XML désactivé. Cette règle détecte le code qui utilise la <xref:System.Xml.Serialization.XmlSerializer.Deserialize%2A?displayProperty=nameWithType> méthode et ne prend pas `XmlReader` comme paramètre de constructeur.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

N’utilisez pas de <xref:System.Xml.Serialization.XmlSerializer.Deserialize%2A?displayProperty=nameWithType> surcharges autres que <xref:System.Xml.Serialization.XmlSerializer.Deserialize(System.Xml.XmlReader)> , <xref:System.Xml.Serialization.XmlSerializer.Deserialize(System.Xml.XmlReader,System.String)> , <xref:System.Xml.Serialization.XmlSerializer.Deserialize(System.Xml.XmlReader,System.Xml.Serialization.XmlDeserializationEvents)> ou <xref:System.Xml.Serialization.XmlSerializer.Deserialize(System.Xml.XmlReader,System.String,System.Xml.Serialization.XmlDeserializationEvents)> .

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Vous pouvez potentiellement supprimer cet avertissement si le code XML analysé provient d’une source approuvée et ne peut donc pas être falsifié.

## <a name="pseudo-code-examples"></a>Exemples de pseudo-code

### <a name="violation"></a>Violation

L’exemple de pseudo-code suivant illustre le modèle détecté par cette règle.
Le type du premier paramètre de <xref:System.Xml.Serialization.XmlSerializer.Deserialize%2A?displayProperty=nameWithType> n’est pas `XmlReader` ou une classe dérivée de celui-ci.

```csharp
using System.IO;
using System.Xml.Serialization;
...
new XmlSerializer(typeof(TestClass).Deserialize(new FileStream("filename", FileMode.Open));
```

### <a name="solution"></a>Solution

```csharp
using System.IO;
using System.Xml;
using System.Xml.Serialization;
...
new XmlSerializer(typeof(TestClass)).Deserialize(XmlReader.Create (new FileStream("filename", FileMode.Open)));
```
