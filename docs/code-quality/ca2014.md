---
title: 'CA2014 : Ne pas utiliser stackalloc dans les boucles'
ms.date: 06/18/2020
ms.topic: reference
f1_keywords:
- DoNotUseStackallocInLoops
- CA2014
helpviewer_keywords:
- DoNotUseStackallocInLoops
- CA2014
author: stephentoub
ms.author: stoub
manager: jeffhand
ms.workload:
- multiple
ms.openlocfilehash: 09f98836a9dcd52f9efb188b72f6c1a4569e76d6
ms.sourcegitcommit: a18c7e9b367c2f92f6e54c3eaef442775d457667
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/15/2020
ms.locfileid: "90098787"
---
# <a name="ca2014-do-not-use-stackalloc-in-loops"></a>CA2014 : Ne pas utiliser stackalloc dans les boucles

|Élément|Valeur|
|-|-|
|ID de la règle|Ca2014|
|Category|Microsoft. fiabilité|
|Modification avec rupture|Sans rupture|

## <a name="cause"></a>Cause

Utilisation de l' [expression C# stackalloc](/dotnet/csharp/language-reference/operators/stackalloc) à l’intérieur d’une boucle.

## <a name="rule-description"></a>Description de la règle

L' `stackalloc` expression C# alloue de la mémoire à partir du frame de pile actuel, et cette mémoire ne peut pas être libérée tant que l’appel de la méthode en cours n’est pas retourné. Si `stackalloc` est utilisé dans une boucle, cela peut entraîner des dépassements de capacité de la pile en raison de l’épuisement de la mémoire de la pile.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Déplacez l' `stackalloc` expression en dehors de toutes les boucles dans la méthode.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Il peut être prudent de supprimer l’avertissement lorsque la ou les boucles conteneur sont appelées uniquement un nombre fini de fois, de telle sorte que la quantité globale de mémoire allouée pour toutes les `stackalloc` opérations est connue pour être relativement faible.

## <a name="see-also"></a>Voir aussi

- [Avertissements liés à la fiabilité](../code-quality/reliability-warnings.md)
