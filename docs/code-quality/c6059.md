---
title: C6059
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6059
helpviewer_keywords:
- C6059
ms.assetid: 343a4cd1-048a-4edf-bb4b-187097bb6093
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 73d1e8f856cd2acead9ae28f04588ed401ecf428
ms.sourcegitcommit: 485ffaedb1ade71490f11cf05962add1718945cc
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/16/2019
ms.locfileid: "72441931"
---
# <a name="c6059"></a>C6059
AVERTISSEMENT C6059 : paramètre de longueur incorrect dans l’appel à \<function >. Transmettez le nombre de caractères restants, et non la taille de la mémoire tampon de \<variable >

 Cet avertissement indique qu’un appel à une fonction de concaténation de chaînes passe probablement une valeur incorrecte pour le nombre de caractères à concaténer. Ce défaut peut entraîner un dépassement de mémoire tampon ou un blocage exploitable. La cause courante de cette erreur est la transmission de la taille de la mémoire tampon, au lieu du nombre de caractères restants dans la mémoire tampon, à la fonction de manipulation de chaînes.

## <a name="example"></a>Exemple
 Le code suivant génère cet avertissement :

```
#include <string.h>
#define MAX 25

void f( )
{
  char szTarget[MAX];
  char *szState ="Washington";
  char *szCity="Redmond, ";

  strncpy(szTarget,szCity, MAX);
  szTarget[MAX -1] = '\0';
  strncat(szTarget, szState, MAX); //wrong size
  // code ...
}
```

 Pour corriger cet avertissement, utilisez le nombre correct de caractères à concaténer, comme indiqué dans le code suivant :

```
#include <string.h>
#define MAX 25

void f( )
{
  char szTarget[MAX];
  char *szState ="Washington";
  char *szCity="Redmond, ";

  strncpy(szTarget,szCity, MAX);
  szTarget[MAX -1] = '\0';
  strncat(szTarget, szState, MAX - strlen(szTarget)); // correct size
  // code ...
}
```

 Pour corriger cet avertissement à l’aide de la fonction de manipulation de chaînes sécurisée, consultez le code suivant :

```
#include <string.h>

void f( )
{
  char *szState ="Washington";
  char *szCity="Redmond, ";

  size_t nTargetSize = strlen(szState) + strlen(szCity) + 1;
  char *szTarget= new char[nTargetSize];

  strncpy_s(szTarget, nTargetSize, szCity,strlen(szCity));
  strncat_s(szTarget, nTargetSize, szState,
                    nTargetSize - strlen(szTarget));
  // code ...
  delete [] szTarget;
}
```

## <a name="see-also"></a>Voir aussi

- [strncpy_s, _strncpy_s_l, wcsncpy_s, _wcsncpy_s_l, _mbsncpy_s, _mbsncpy_s_l](/cpp/c-runtime-library/reference/strncpy-s-strncpy-s-l-wcsncpy-s-wcsncpy-s-l-mbsncpy-s-mbsncpy-s-l)
- [strncat_s, _strncat_s_l, wcsncat_s, _wcsncat_s_l, _mbsncat_s, _mbsncat_s_l](/cpp/c-runtime-library/reference/strncat-s-strncat-s-l-wcsncat-s-wcsncat-s-l-mbsncat-s-mbsncat-s-l)
