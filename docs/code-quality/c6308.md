---
title: C6308
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6308
helpviewer_keywords:
- C6308
ms.assetid: 1162cd96-9037-4576-9858-0c8361a12559
author: corob-msft
ms.author: corob
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 17f7bc5f6da4301445e9c5ee3ab528a7263bcff1
ms.sourcegitcommit: 68f893f6e472df46f323db34a13a7034dccad25a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/15/2020
ms.locfileid: "77262376"
---
# <a name="c6308"></a>C6308
AVERTISSEMENT C6308 : 'realloc’peut retourner un pointeur null : l’assignation d’un pointeur null à \<variable >, qui est passée en tant qu’argument à’realloc', entraîne la fuite du bloc de mémoire d’origine

 Cet avertissement indique une fuite de mémoire qui résulte de l’utilisation incorrecte d’une fonction de réallocation. Les fonctions de réallocation du tas ne libèrent pas la mémoire tampon passée si la réallocation échoue. Pour corriger l’erreur, assignez le résultat de la fonction de réallocation à un temporaire, puis remplacez le pointeur d’origine après une réallocation réussie.

## <a name="example"></a>Exemple
 L’exemple de code suivant génère cet avertissement :

```cpp
#include <malloc.h>
#include <windows.h>

void f( )
{
  char *x;
  x = (char *) malloc(10);
  if (x != NULL)
  {
    x = (char *) realloc(x, 512);
    // code...
    free(x);
  }
}
```

 Pour corriger cet avertissement, utilisez le code suivant :

```cpp
#include <malloc.h>
#include <windows.h>

void f()
{
  char *x, *tmp;

  x = (char *) malloc(10);

  if (x != NULL)
  {
    tmp = (char *) realloc(x,512);
    if (tmp != NULL)
    {
      x = tmp;
    }
    free(x);
  }
}
```

 Cet avertissement peut générer un bruit s’il existe un alias dynamique vers la mémoire tampon-à réallouer au moment de l’assignation du résultat de la fonction de réallocation.

 Pour éviter ce genre de problèmes, utilisez les mécanismes fournis par la C++ bibliothèque STL (Standard Template Library). Il s’agit notamment des [shared_ptr](/cpp/standard-library/shared-ptr-class), [unique_ptr](/cpp/standard-library/unique-ptr-class)et [Vector](/cpp/standard-library/vector). Pour plus d’informations, consultez [pointeurs intelligents](/cpp/cpp/smart-pointers-modern-cpp) et [ C++ bibliothèque standard](/cpp/standard-library/cpp-standard-library-reference).

## <a name="see-also"></a>Voir aussi
 [C6014](../code-quality/c6014.md)
