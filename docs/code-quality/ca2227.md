---
title: 'CA2227 : Les propriétés de collection doivent être en lecture seule'
ms.date: 09/28/2018
ms.topic: reference
f1_keywords:
- CA2227
- CollectionPropertiesShouldBeReadOnly
helpviewer_keywords:
- CA2227
- CollectionPropertiesShouldBeReadOnly
ms.assetid: 26967aaf-6fbe-438a-b4d3-ac579b5dc0f9
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
- CPP
ms.workload:
- multiple
ms.openlocfilehash: b3884a817610aa2c67c9e00d6251f4dbc63662e9
ms.sourcegitcommit: 4bcd6abb89feff1cf8251e3ded73fdc30b67e347
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2020
ms.locfileid: "81615600"
---
# <a name="ca2227-collection-properties-should-be-read-only"></a>CA2227 : Les propriétés de collection doivent être en lecture seule

|||
|-|-|
|TypeName|CollectionPropertiesShouldBeReadOnly|
|CheckId|CA2227|
|Category|Microsoft.Utilisation|
|Modification avec rupture|Rupture|

## <a name="cause"></a>Cause

Une propriété extérieurement visible et exécutable <xref:System.Collections.ICollection?displayProperty=fullName>est d’un type qui met en œuvre . Cette règle ignore les tableaux, les indexeurs (propriétés avec le nom «Article»), les collections immuables, les collections lisibles, et les ensembles d’autorisation.

## <a name="rule-description"></a>Description de la règle

Une propriété de collecte aptable permet à un utilisateur de remplacer la collection par une collection complètement différente. Une propriété de lecture seulement empêche la collection d’être remplacée, mais permet toujours aux membres individuels d’être définis. Si le remplacement de la collection est un objectif, le modèle de conception préféré est d’inclure une méthode pour supprimer tous les éléments de la collection, et une méthode pour repeupler la collection. Voir <xref:System.Collections.ArrayList.Clear%2A> les <xref:System.Collections.ArrayList.AddRange%2A> méthodes <xref:System.Collections.ArrayList?displayProperty=fullName> et les méthodes de la classe pour un exemple de ce modèle.

Les propriétés binaires et XML de sérialisation prennent en charge les propriétés lues uniquement qui sont des collections. La <xref:System.Xml.Serialization.XmlSerializer?displayProperty=fullName> classe a des exigences <xref:System.Collections.ICollection> <xref:System.Collections.IEnumerable?displayProperty=fullName> spécifiques pour les types qui mettent en œuvre et afin d’être sérialisable.

## <a name="how-to-fix-violations"></a>Comment corriger les violations

Pour corriger une violation de cette règle, faire la propriété lue uniquement. Si la conception l’exige, ajoutez des méthodes pour effacer et repeupler la collection.

## <a name="when-to-suppress-warnings"></a>Quand supprimer les avertissements

Vous pouvez supprimer l’avertissement si la propriété fait partie d’une classe d’objet de transfert de [données (DTO).](/previous-versions/msp-n-p/ff649585(v=pandp.10))

Sinon, ne supprimez pas les avertissements de cette règle.

## <a name="example"></a>Exemple

L’exemple suivant montre un type avec une propriété de collecte exauptable et montre comment la collection peut être remplacée directement. En outre, il montre la manière préférée de `Clear` remplacer `AddRange` une propriété de collecte de lecture seulement en utilisant et les méthodes.

[!code-csharp[FxCop.Usage.PropertiesReturningCollections#1](../code-quality/codesnippet/CSharp/ca2227-collection-properties-should-be-read-only_1.cs)]
[!code-vb[FxCop.Usage.PropertiesReturningCollections#1](../code-quality/codesnippet/VisualBasic/ca2227-collection-properties-should-be-read-only_1.vb)]
[!code-cpp[FxCop.Usage.PropertiesReturningCollections#1](../code-quality/codesnippet/CPP/ca2227-collection-properties-should-be-read-only_1.cpp)]

## <a name="related-rules"></a>Règles connexes

- [CA1819 : Les propriétés ne doivent pas retourner des tableaux](../code-quality/ca1819.md)
