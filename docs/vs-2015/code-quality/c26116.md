---
title: C26116 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C26116
helpviewer_keywords:
- C26116
ms.assetid: 43e99d2c-405e-4913-b6bd-47f5858b2877
caps.latest.revision: 8
author: mikeblome
ms.author: mblome
manager: jillfra
ms.openlocfilehash: 43600b0df77d2deb1a9aeb720807f2a72fe61d26
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/23/2019
ms.locfileid: "68145154"
---
# <a name="c26116"></a>C26116
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

avertissement C26116 : Échec d’acquisition ou du maintien du verrou \<verrou > dans \<func >.  
  
 Mise en œuvre de verrou syntaxiquement délimitée *acquérir* et verrou *release* paires dans les programmes C/C++ n’est pas effectuée par le langage. Une fonction peut introduire un effet secondaire de verrouillage en apportant une modification observable à l’état d’accès concurrentiel. Par exemple, une fonction de wrapper de verrou incrémente le nombre d’acquisitions de verrou, ou nombre de verrous, de verrou donné. Vous pouvez annoter une fonction qui a un effet secondaire à partir d’un verrou acquérir ou verrouiller la version à l’aide de `_Acquires_lock_` ou `_Requires_lock_held`, respectivement. Sans ces annotations, une fonction est censée ne pas modifier n’importe quel nombre de verrous après son retour. Si acquiert et les versions ne sont pas équilibrées, ils sont considérés comme *orphelins*. Avertissement C26116 est émis lorsqu’une fonction a été annotée avec `_Acquires_lock_`, mais elle ne pas acquérir un verrou, ou lorsqu’une fonction est annotée avec `_Requires_lock_held` et libère le verrou.  
  
## <a name="example"></a>Exemple  
 L’exemple suivant génère l’avertissement C26116, car la fonction `DoesNotLock` annotée avec `_Acquires_lock_` mais n’est ne pas acquis. La fonction `DoesNotHoldLock` génère l’avertissement, car il est annoté avec `_Requires_lock_held` ne pas celle-ci et maintenez-la enfoncée.  
  
```  
  
typedef struct _DATA   
{  
    CRITICAL_SECTION cs;  
} DATA;  
  
_Acquires_lock_(p->cs) void DoesLock(DATA* p)   
{  
    EnterCriticalSection(&p->cs); // OK  
}  
  
_Acquires_lock_(p->cs) void DoesNotLock(DATA* p)   
{  
    // Warning C26116  
}  
  
_Requires_lock_held_(p->cs) void DoesNotHoldLock(DATA* p)   
{  
    LeaveCriticalSection(&p->cs); // Warning C26116  
}  
  
```  
  
## <a name="see-also"></a>Voir aussi  
 [C26115](../code-quality/c26115.md)
