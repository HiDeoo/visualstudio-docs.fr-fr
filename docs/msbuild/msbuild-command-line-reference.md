---
title: Informations de référence sur la ligne de commande MSBuild | Microsoft Docs
ms.date: 11/04/2016
ms.topic: reference
dev_langs:
- VB
- CSharp
- C++
- jsharp
helpviewer_keywords:
- MSBuild, msbuild.exe
- MSBuild, command line reference
- msbuild.exe
ms.assetid: edaa65ec-ab8a-42a1-84cb-d76d5b2f4584
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: b96d242a8c7af44f47db3ebad5e6af03389a6fc0
ms.sourcegitcommit: cf8c0fef2b9690595e99ce3802586cdd55fd37c2
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/28/2019
ms.locfileid: "70107365"
---
# <a name="msbuild-command-line-reference"></a>Informations de référence sur la ligne de commande MSBuild
Quand vous utilisez *MSBuild.exe* pour générer un fichier projet ou solution, vous pouvez inclure plusieurs commutateurs pour définir différents aspects du processus.

Chaque commutateur est disponible sous deux formes : -commutateur et /commutateur. La documentation ne présente que la forme -commutateur.

## <a name="syntax"></a>Syntaxe

```cmd
MSBuild.exe [Switches] [ProjectFile]
```

## <a name="arguments"></a>Arguments

|Argument|Description|
|--------------|-----------------|
|`ProjectFile`|Génère les cibles dans le fichier projet que vous spécifiez. Si vous ne spécifiez pas de fichier projet, MSBuild recherche dans le répertoire de travail actif une extension de nom de fichier se terminant par *proj* et utilise ce fichier. Vous pouvez aussi spécifier un fichier solution Visual Studio pour cet argument.|

## <a name="switches"></a>Commutateurs

|Basculer|Forme abrégée|Description|
|------------|----------------|-----------------|
|-help|/? ou -h|Affiche des informations sur l'utilisation. La commande suivante est un exemple :<br /><br /> `msbuild.exe -?`|
|-detailedsummary|-ds|Affiche des informations détaillées à la fin du journal de génération sur les configurations qui ont été générées et sur la façon dont elles ont été planifiées sur les nœuds.|
|-ignoreprojectextensions: `extensions`|-ignore: `extensions`|Ignore les extensions spécifiées au moment de déterminer quel fichier projet générer. Utilisez un point-virgule ou une virgule pour séparer les différentes extensions, comme dans l'exemple suivant :<br /><br /> `-ignoreprojectextensions:.vcproj,.sln`|
|-maxcpucount[:`number`]|-m[:`number`]|Spécifie le nombre maximal de processus simultanés à utiliser au moment de la génération. Si vous n'incluez pas ce commutateur, la valeur par défaut est 1. Si vous incluez ce commutateur sans spécifier de valeur, MSBuild utilise le nombre de processeurs dont est équipé l'ordinateur. Pour plus d’informations, consultez [Génération parallèle de plusieurs projets](../msbuild/building-multiple-projects-in-parallel-with-msbuild.md).<br /><br /> Dans l'exemple suivant, MSBuild a pour instruction de générer en utilisant trois processus MSBuild, ce qui permet de générer simultanément trois projets :<br /><br /> `msbuild myproject.proj -maxcpucount:3`|
|-noautoresponse|-noautorsp|N’inclut automatiquement aucun fichier *MSBuild.rsp*.|
|-nodeReuse:`value`|-nr:`value`|Active ou désactive la réutilisation de nœuds MSBuild. Vous pouvez indiquer les valeurs suivantes :<br /><br /> -   **True**. Les nœuds sont conservés à l'issue de la génération pour permettre aux générations suivantes de les utiliser (par défaut).<br />-   **False**. Les nœuds ne sont pas conservés à l'issue de la génération.<br /><br /> Un nœud correspond à un projet en cours d’exécution. Si le commutateur **-maxcpucount** est utilisé, plusieurs nœuds peuvent s’exécuter simultanément.|
|-nologo||N'affiche pas la bannière de démarrage ni le message de copyright.|
|<a name="preprocess"></a> -preprocess[:`filepath`]|-pp[:`filepath`]|Crée un fichier projet agrégé unique en incorporant tous les fichiers qui seraient importés lors d'une génération, avec une indication de leurs limites. Vous pouvez utiliser ce commutateur pour identifier plus facilement les fichiers importés, leur emplacement d'origine, ainsi que les fichiers qui contribuent à la génération. Quand ce commutateur est utilisé, le projet n’est pas généré.<br /><br /> Si vous spécifiez un `filepath`, le fichier projet agrégé est généré dans le fichier. Sinon, la sortie s'affiche dans la fenêtre de console.<br /><br /> Pour plus d’informations sur l’insertion d’un fichier projet dans un autre fichier projet à l’aide de l’élément `Import`, consultez [Import, élément (MSBuild)](../msbuild/import-element-msbuild.md) et [Guide pratique pour utiliser la même cible dans plusieurs fichiers projet](../msbuild/how-to-use-the-same-target-in-multiple-project-files.md).|
|-property:`name`=`value`|-p:`name`=`value`|Définit ou substitue les propriétés de niveau projet spécifiées, `name` correspondant au nom de la propriété et `value` à la valeur de la propriété. Spécifiez chaque propriété séparément ou utilisez un point-virgule ou une virgule pour séparer plusieurs propriétés, comme dans l'exemple suivant :<br /><br /> `-property:WarningLevel=2;OutDir=bin\Debug`|
|-restore|-r|Exécute la cible `Restore` avant de générer les cibles réelles.|
|-target:`targets`|-t:`targets`|Génère les cibles spécifiées dans le projet. Spécifiez chaque cible séparément ou utilisez un point-virgule ou une virgule pour séparer plusieurs cibles, comme dans l'exemple suivant :<br /><br /> `-target:PrepareResources;Compile`<br /><br /> Si vous spécifiez des cibles à l'aide de ce commutateur, elles sont exécutées à la place des cibles définies dans l'attribut `DefaultTargets` du fichier projet. Pour plus d’informations, consultez [Ordre de génération des cibles](../msbuild/target-build-order.md) et [Guide pratique pour spécifier la cible à générer en premier](../msbuild/how-to-specify-which-target-to-build-first.md).<br /><br /> Une cible est un groupe de tâches. Pour plus d’informations, consultez l’article [Targets (Cibles MSBuild)](../msbuild/msbuild-targets.md).|
|-toolsversion:`version`|-tv:`version`|Spécifie la version de l'ensemble d'outils à utiliser pour générer le projet, comme dans l'exemple suivant :`-toolsversion:3.5`<br /><br /> À l’aide de ce commutateur, vous pouvez générer un projet et spécifier une version différente de celle spécifiée dans [l’élément Project (MSBuild)](../msbuild/project-element-msbuild.md). Pour plus d’informations, consultez [Substitution des paramètres ToolsVersion](../msbuild/overriding-toolsversion-settings.md).<br /><br /> Pour MSBuild 4.5, vous pouvez attribuer à `version` les valeurs suivantes : 2.0, 3.5 et 4.0. Si vous spécifiez 4.0, la propriété de build `VisualStudioVersion` désigne le sous-ensemble d'outils à utiliser. Pour plus d’informations, consultez la section Sous-ensembles d’outils de [Ensemble d’outils MSBuild (ToolsVersion)](../msbuild/msbuild-toolset-toolsversion.md).<br /><br /> Un ensemble d’outils se compose des tâches, des cibles et des outils utilisés pour générer une application. Les outils incluent des compilateurs tels que *csc.exe* et *vbc.exe*. Pour plus d’informations sur les ensembles d’outils, consultez [Ensemble d’outils (ToolsVersion)](../msbuild/msbuild-toolset-toolsversion.md), [Configurations standard et personnalisée de l’ensemble d’outils](../msbuild/standard-and-custom-toolset-configurations.md) et [Multiciblage](../msbuild/msbuild-multitargeting-overview.md). **Remarque :**  La version de l’ensemble d’outils n’est pas la même chose que le framework cible, qui est la version du .NET Framework sur laquelle un projet est conçu pour s’exécuter. Pour plus d’informations, consultez [Version cible de .NET Framework et plateforme cible](../msbuild/msbuild-target-framework-and-target-platform.md).|
|-validate:[`schema`]|-val[`schema`]|Valide le fichier projet et, si la validation réussit, génère le projet.<br /><br /> Si vous ne spécifiez pas `schema`, le projet est validé par rapport au schéma par défaut.<br /><br /> Si vous spécifiez `schema`, le projet est validé par rapport au schéma que vous spécifiez.<br /><br /> Voici un exemple de paramétrage : `-validate:MyExtendedBuildSchema.xsd`|
|-verbosity:`level`|-v:`level`|Spécifie la quantité d'informations à afficher dans le journal de génération. Chaque enregistreur d'événements affiche les événements en fonction du niveau de commentaires que vous définissez pour l'enregistreur d'événements en question.<br /><br /> Vous pouvez spécifier les niveaux de commentaires suivantes : `q[uiet]`, `m[inimal]`, `n[ormal]`, `d[etailed]` et `diag[nostic]`.<br /><br /> Voici un exemple de paramétrage : `-verbosity:quiet`|
|-version|-ver|Affiche uniquement les informations de version. Le projet n’est pas généré.|
|@`file`||Insère des commutateurs de ligne de commande à partir d'un fichier texte. Si vous avez plusieurs fichiers, spécifiez-les séparément. Pour plus d’informations, consultez [Fichiers réponse](../msbuild/msbuild-response-files.md).|

### <a name="switches-for-loggers"></a>Commutateurs pour les enregistreurs d’événements

|Basculer|Forme abrégée|Description|
|------------|----------------|-----------------|
|-consoleloggerparameters:<br /><br /> `parameters`|-clp:`parameters`|Passe les paramètres que vous spécifiez à l'enregistreur d'événements de console, qui affiche les informations de build dans la fenêtre de console. Vous pouvez spécifier les paramètres suivants :<br /><br /> -   **PerformanceSummary**. Affiche le temps consacré aux tâches, cibles et projets.<br />-   **Summary**. affiche le résumé des erreurs et avertissements à la fin.<br />-   **NoSummary**. n'affiche pas le résumé des erreurs et avertissements à la fin.<br />-   **ErrorsOnly**. affiche uniquement les erreurs.<br />-   **WarningsOnly**. affiche uniquement les avertissements.<br />-   **NoItemAndPropertyList**. n'affiche pas la liste des éléments et des propriétés qui apparaîtrait au début de chaque génération de projet si le niveau de commentaires défini était `diagnostic`.<br />-   **ShowCommandLine**. affiche les messages `TaskCommandLineEvent`.<br />-   **ShowTimestamp**. affiche l'horodatage sous forme de préfixe des messages.<br />-   **ShowEventId**. affiche l'ID d'événement pour chaque message et événement (démarré et terminé).<br />-   **ForceNoAlign**. n'adapte pas le texte à la taille de la mémoire tampon de la console.<br />-   **DisableConsoleColor**. utilise les couleurs de console par défaut pour tous les messages de journalisation.<br />-   **DisableMPLogging**. désactive le style de journalisation multiprocesseur de la sortie lors d'une exécution en mode non multiprocesseur.<br />-   **EnableMPLogging**. active le style de journalisation multiprocesseur même lors d'une exécution en mode non multiprocesseur. Ce style de journalisation est activé par défaut.<br />-   **Verbosity**. Remplace le paramètre **-verbosity** pour cet enregistreur d’événements.<br /><br /> Utilisez un point-virgule ou une virgule pour séparer plusieurs paramètres, comme dans l'exemple suivant :<br /><br /> `-consoleloggerparameters:PerformanceSummary;NoSummary -verbosity:minimal`|
|-distributedFileLogger|-dfl|consigne la sortie de génération de chaque nœud MSBuild dans son propre fichier. L'emplacement initial de ces fichiers est le répertoire actif. Par défaut, les fichiers sont nommés *MSBuild\<NodeId>.log*. Vous pouvez utiliser le commutateur **-fileLoggerParameters** pour spécifier l’emplacement des fichiers et d’autres paramètres de l’enregistreur d’événements de fichiers.<br /><br /> Si vous nommez un fichier journal à l’aide du commutateur **-fileLoggerParameters**, l’enregistreur d’événements distribué utilise ce nom comme modèle et y ajoute l’ID de nœud au moment de créer un fichier journal pour chaque nœud.|
|-distributedlogger:<br /><br /> `central logger`*<br /><br /> `forwarding logger`|-dl:`central logger`*`forwarding logger`|Consigne les événements de MSBuild, en joignant une instance d'enregistreur d'événements différente à chaque nœud. Pour spécifier plusieurs enregistreurs d'événements, spécifiez-les séparément.<br /><br /> Pour spécifiez un enregistreur d'événements, utilisez la syntaxe appropriée. Pour plus d’informations sur la syntaxe des enregistreurs d’événements, voir le commutateur **-logger** ci-dessous.<br /><br /> Les exemples suivants montrent comment utiliser ce commutateur :<br /><br /> `-dl:XMLLogger,MyLogger,Version=1.0.2,Culture=neutral`<br /><br /> `-dl:MyLogger,C:\My.dll*ForwardingLogger,C:\Logger.dll`|
|-fileLogger<br /><br /> *[number]*|-fl[`number`]|Consigne la sortie de génération dans un fichier unique dans le répertoire actif. Si vous ne spécifiez pas `number`, le fichier de sortie est nommé *msbuild.log*. Si vous spécifiez `number`, le fichier de sortie est nommé *msbuild\<n>.log*, \<n> correspondant à `number`. `Number` peut être un chiffre compris entre 1 et 9.<br /><br /> Vous pouvez utiliser le commutateur **-fileLoggerParameters** pour spécifier l’emplacement du fichier et d’autres paramètres de l’enregistreur d’événements de fichiers.|
|-fileloggerparameters:[number]<br /><br /> `parameters`|-flp:[ `number`] `parameters`|Spécifie les paramètres supplémentaires de l'enregistreur d'événements des fichiers et de l'enregistreur d'événements des fichiers distribué. La présence de ce commutateur implique la présence du commutateur -**filelogger[** `number` **]** correspondant. `Number` peut être un chiffre compris entre 1 et 9.<br /><br /> Vous pouvez utiliser tous les paramètres de **-consoleloggerparameters**. Vous pouvez aussi utiliser un ou plusieurs des paramètres suivants :<br /><br /> -   **LogFile**. chemin d’accès au fichier journal dans lequel le journal de génération est écrit. L’enregistreur d’événements des fichiers distribué accole en préfixe ce chemin d’accès au nom de ses fichiers journaux.<br />-   **Append**. détermine si le journal de génération est ajouté au fichier journal ou s'il le remplace. Quand vous définissez le commutateur, le journal de génération est ajouté au fichier journal. En l'absence du commutateur, le contenu du fichier journal existant est remplacé, le cas échéant.<br />     Si vous incluez le commutateur append, le journal est ajouté, quelle que soit la valeur que vous lui avez attribuée (true ou false). Si vous n'incluez pas le commutateur append, le journal est remplacé.<br />     Dans ce cas, le fichier est remplacé :`msbuild myfile.proj -l:FileLogger,Microsoft.Build;logfile=MyLog.log`<br />     Dans ce cas, le fichier est ajouté :`msbuild myfile.proj -l:FileLogger,Microsoft.Build;logfile=MyLog.log;append=true`<br />     Dans ce cas, le fichier est ajouté :`msbuild myfile.proj -l:FileLogger,Microsoft.Build;logfile=MyLog.log;append=false`<br />-   **Encoding**. spécifie l'encodage pour le fichier (par exemple, UTF-8, Unicode ou ASCII).<br /><br /> L'exemple suivant génère des fichiers journaux distincts pour les avertissements et les erreurs :<br /><br /> `-flp1:logfile=errors.txt;errorsonly -flp2:logfile=warnings.txt;warningsonly`<br /><br /> Les exemples suivants montrent d'autres possibilités :<br /><br /> `-fileLoggerParameters:LogFile=MyLog.log;Append; Verbosity=diagnostic;Encoding=UTF-8`<br /><br /> `-flp:Summary;Verbosity=minimal;LogFile=msbuild.sum`<br /><br /> `-flp1:warningsonly;logfile=msbuild.wrn`<br /><br /> `-flp2:errorsonly;logfile=msbuild.err`|
|-binaryLogger[:[LogFile=]`output.binlog`[;ProjectImports=[None,Embed,ZipFile]]]|-bl|Sérialise tous les événements de build dans un fichier binaire compressé. Par défaut, le fichier est dans le répertoire actif et nommé *msbuild.binlog*. Le journal binaire est une description détaillée du processus de génération qui peut être utilisé plus tard pour reconstruire les journaux de texte et pour servir à d’autres outils d’analyse. Un journal binaire est généralement 10 à 20 fois plus petit que le plus détaillé des journaux de texte du niveau diagnostic, mais il contient davantage d’informations.<br /><br />Par défaut, l’enregistreur d’événements binaire collecte le texte source des fichiers projet, y compris tous les projets importés et les fichiers cibles rencontrés pendant la build. Le commutateur `ProjectImports` facultatif contrôle ce comportement :<br /><br /> -   **ProjectImports = None**. Ne pas collecter les importations du projet.<br /> -   **ProjectImports=Embed**. Incorporer les importations du projet dans le fichier journal (par défaut).<br /> -   **ProjectImports = ZipFile**. Enregistrer les fichiers projet dans *\<sortie>.projectimports.zip*, où \<sortie> représente le même nom que celui du fichier journal binaire.<br /><br />Le paramètre par défaut pour ProjectImports est Embed.<br />**Remarque** : L’enregistreur d’événements ne collecte pas les fichiers sources non-MSBuild, tels que *.cs*, *.cpp*, etc.<br />Un fichier *.binlog* peut être « lu » en le passant à *msbuild.exe* en tant qu’argument à la place d’un projet ou d’une solution. D’autres enregistreurs d’événements reçoivent les informations contenues dans le fichier journal, comme si la génération d’origine se produisait. Pour plus d’informations sur le journal binaire et ses usages, consultez : https://github.com/Microsoft/msbuild/wiki/Binary-Log <br /><br />**Exemples** :<br /> -   `-bl`<br /> -    `-bl:output.binlog`<br /> -   `-bl:output.binlog;ProjectImports=None`<br /> -   `-bl:output.binlog;ProjectImports=ZipFile`<br /> -   `-bl:..\..\custom.binlog`<br /> -   `-binaryLogger`|
|-logger:<br /><br /> `logger`|-l:`logger`|Spécifie l'enregistreur d'événements à utiliser pour consigner les événements de MSBuild. Pour spécifier plusieurs enregistreurs d'événements, spécifiez-les séparément.<br /><br /> Utilisez la syntaxe suivante pour `logger` : `[``LoggerClass``,]``LoggerAssembly``[;``LoggerParameters``]`<br /><br /> Utilisez la syntaxe suivante pour `LoggerClass` : `[``PartialOrFullNamespace``.]``LoggerClassName`<br /><br /> Vous n'êtes pas obligé de spécifier la classe d'enregistreur d'événements si l'assembly contient exactement un enregistreur d'événements.<br /><br /> Utilisez la syntaxe suivante pour `LoggerAssembly` : `{``AssemblyName``[,``StrongName``] &#124;` `AssemblyFile``}`<br /><br /> Les paramètres d'enregistreur d'événements sont facultatifs et sont passés à l'enregistreur d'événements au moment même où vous les entrez.<br /><br /> Les exemples suivants utilisent le commutateur **-logger**.<br /><br /> `-logger:XMLLogger,MyLogger,Version=1.0.2,Culture=neutral`<br /><br /> `-logger:XMLLogger,C:\Loggers\MyLogger.dll;OutputAsHTML`|
|-noconsolelogger|-noconlog|Désactive l'enregistreur d'événements de console par défaut et ne consigne pas les événements dans la console.|

## <a name="example"></a>Exemples
 L’exemple suivant génère la cible `rebuild` du projet *MyProject.proj*.

```cmd
MSBuild.exe MyProject.proj -t:rebuild
```

## <a name="example"></a>Exemples
 Vous pouvez utiliser *MSBuild.exe* pour effectuer des générations plus complexes. Par exemple, vous pouvez l'utiliser pour générer des cibles spécifiques de certains projets dans le cadre d'une solution. L’exemple suivant regénère le projet `NotInSolutionFolder` et nettoie le projet `InSolutionFolder` qui se trouve dans le dossier de solution *NewFolder*.

```cmd
msbuild SlnFolders.sln -t:NotInSolutionfolder:Rebuild;NewFolder\InSolutionFolder:Clean
```

## <a name="see-also"></a>Voir aussi
- [Informations de référence sur MSBuild](../msbuild/msbuild-reference.md)
- [Propriétés communes des projets MSBuild](../msbuild/common-msbuild-project-properties.md)
